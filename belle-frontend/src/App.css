/* --- GLOBAL RESET --- */
* { box-sizing: border-box; }

body {
  margin: 0; padding: 0;
  background-color: #000;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden; /* ·∫®n thanh cu·ªôn th·ª´a c·ªßa trang web */
}

#root {
  width: 100%;
  height: 100vh;
}

/* --- LAYOUT CH√çNH (GRID 3 C·ªòT) --- */
.app-layout {
  display: grid;
  /* C·∫•u tr√∫c: Tr√°i (240px) - Gi·ªØa (T·ª± gi√£n) - Ph·∫£i (280px) */
  grid-template-columns: 240px minmax(0, 1fr) 280px; 
  height: 100vh;
  gap: 12px;
  padding: 12px;
  background-color: #121212;
  /* H√¨nh n·ªÅn t·ªëi, m·ªù ·∫£o */
  background: url('https://wallpaperaccess.com/full/12268968.jpg') no-repeat center center fixed;
  background-size: cover;
  transition: all 0.3s ease-in-out;
}

/* Mobile: Chuy·ªÉn v·ªÅ 1 c·ªôt */
@media (max-width: 1000px) {
  .app-layout { grid-template-columns: 240px 1fr 0px; } /* ·∫®n c·ªôt ph·∫£i tr√™n m√†n h√¨nh nh·ªè */
  .sidebar.sidebar-right { display: none; }
}
@media (max-width: 768px) {
  .app-layout { grid-template-columns: 1fr; display: block; }
  .sidebar { display: none; }
}

/* --- SIDEBAR CHUNG (Tr√°i & Ph·∫£i) --- */
.sidebar {
  background-color: rgba(30, 30, 30, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 20px;
  color: #eee;
  border: 1px solid #333;
  display: flex;
  flex-direction: column;
  gap: 15px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  z-index: 20; /* Lu√¥n n·ªïi l√™n tr√™n */
}

.sidebar-title { font-size: 1.1rem; font-weight: 800; color: #007bff; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 1px; }
.sidebar-item { display: flex; align-items: center; gap: 10px; padding: 12px; border-radius: 12px; cursor: pointer; font-weight: 500; transition: 0.2s; color: #aaa; }
.sidebar-item:hover { background-color: #333; color: #fff; transform: translateX(5px); }
.sidebar-item.active { background-color: #007bff; color: white; box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3); }

/* --- KHUNG CHAT (C·ªòT GI·ªÆA - M·∫∂C ƒê·ªäNH) --- */
.chat-container.zzz-theme {
  position: relative;
  display: flex;
  flex-direction: column;
  background-color: rgba(20, 20, 20, 0.95); /* N·ªÅn t·ªëi m·∫∑c ƒë·ªãnh */
  border-radius: 20px;
  border: 1px solid #333;
  overflow: hidden;
  height: 100%;
  transition: background-color 0.3s ease;
}

/* HEADER */
.chat-header {
  display: flex; align-items: center; padding: 15px 20px;
  background-color: rgba(40, 40, 40, 0.8);
  border-bottom: 1px solid #333;
  z-index: 10;
}
.header-avatar { 
  width: 40px; 
  height: 40px; 
  border-radius: 50%; 
  margin-right: 15px; 
  border: 2px solid #007bff; 
}

.header-title { 
  font-size: 1.2rem; 
  font-weight: bold; 
  flex-grow: 1; color: white; 
}

.close-button { 
  background: none; 
  border: none; 
  color: #888; 
  font-size: 1.2rem; 
  cursor: pointer; 
}

/* WINDOW */
.chat-window {
  flex-grow: 1;
  padding: 20px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 20px;
  position: relative;
  z-index: 5; /* Cao h∆°n Live2D */
}

/* MESSAGES */
.message-row { display: flex; align-items: flex-end; max-width: 100%; position: relative; z-index: 6; }
.message-row.user { justify-content: flex-end; }
.chat-avatar { width: 35px; height: 35px; border-radius: 50%; margin: 0 10px; border: 2px solid #444; }

.chat-message {
  padding: 12px 18px; 
  border-radius: 18px; 
  max-width: 85%; 
  line-height: 1.5; 
  font-size: 0.95rem;
  color: #eee;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.chat-message.user { background-color: #007bff; color: white; border-bottom-right-radius: 4px; }
.chat-message.belle { background-color: #333; color: #eee; border-bottom-left-radius: 4px; border: 1px solid #444; }

/* INPUT */
.chat-input-form {
  display: flex; padding: 15px 20px; background-color: rgba(30, 30, 30, 0.9);
  border-top: 1px solid #333; gap: 10px; align-items: flex-end;
  z-index: 10;
}
.chat-input-form textarea {
  flex-grow: 1; background-color: #111; border: 1px solid #444; border-radius: 16px;
  padding: 12px 15px; color: #fff; font-family: inherit; outline: none; resize: none; min-height: 50px;
}
.chat-input-form button {
  height: 50px; padding: 0 25px; border-radius: 16px; background-color: #007bff; color: white; border: none; font-weight: bold; cursor: pointer;
}

/* ==============================================
   üî• CH·∫æ ƒê·ªò LIVE2D (IMMERSIVE MODE)
   ============================================== */

/* Bi·∫øn khung chat th√†nh trong su·ªët ƒë·ªÉ th·∫•y Belle */
.chat-container.mode-immersive {
  background: #000 !important; /* N·ªÅn ƒëen tuy·ªÅn ph√≠a sau Belle */
  border: none !important;
  box-shadow: none !important;
}

/* Belle (Live2D) n·∫±m d∆∞·ªõi c√πng */
.live2d-background {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  z-index: 1; /* Th·∫•p nh·∫•t */
  display: flex; justify-content: center; align-items: flex-end;
  pointer-events: none; /* Chu·ªôt b·∫•m xuy√™n qua */
  overflow: hidden;
}

/* Header & Input: K√≠nh m·ªù trong su·ªët */
.mode-immersive .chat-header,
.mode-immersive .chat-input-form {
  background-color: rgba(0, 0, 0, 0.3) !important; /* ƒêen m·ªù 30% */
  backdrop-filter: blur(5px);
  border-color: rgba(255, 255, 255, 0.1) !important;
}

/* V√πng tin nh·∫Øn: Ho√†n to√†n trong su·ªët */
.mode-immersive .chat-window {
  background: transparent !important;
}

/* Bong b√≥ng chat: Hi·ªáu ·ª©ng k√≠nh m·ªù (Glassmorphism) */
.mode-immersive .chat-message.belle {
  background-color: rgba(40, 40, 40, 0.7) !important; /* X√°m m·ªù */
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  text-shadow: 0 1px 2px black;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.mode-immersive .chat-message.user {
  background-color: rgba(0, 123, 255, 0.7) !important; /* Xanh m·ªù */
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Input trong ch·∫ø ƒë·ªô n√†y */
.mode-immersive .chat-input-form textarea {
  background-color: rgba(255, 255, 255, 0.1) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* --- C√ÅC CSS PH·ª§ (Edit, Buttons...) --- */
.message-actions { display: flex; gap: 5px; align-self: center; opacity: 0; transition: 0.2s; margin: 0 8px; }
.message-row:hover .message-actions { opacity: 1; }
.action-btn { background: #333; border: 1px solid #555; cursor: pointer; padding: 5px; border-radius: 50%; color: #aaa; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center;}
.action-btn:hover { color: white; border-color: white; transform: scale(1.1); }
.message-row.user .message-actions { order: -1; margin-right: 8px; }
.edit-container { flex-grow: 1; display: flex; flex-direction: column; gap: 5px; width: 100%; min-width: 350px; }
.edit-textarea { width: 100%; background: #222; color: #fff; border: 2px solid #007bff; border-radius: 12px; padding: 10px; resize: vertical; }
.edit-buttons { display: flex; gap: 10px; justify-content: flex-end; }
.save-btn { background: #007bff; color: white; border: none; padding: 6px 16px; border-radius: 8px; cursor: pointer; }
.cancel-btn { background: transparent; border: 1px solid #555; color: #aaa; padding: 6px 16px; border-radius: 8px; cursor: pointer; }
.mobile-menu-btn { display: none; background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
.mobile-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 998; }
.sidebar.sidebar-left.open { display: flex; position: fixed; top:0; left:0; bottom:0; width: 280px; z-index: 999; background: #181818; box-shadow: 5px 0 20px rgba(0,0,0,0.5); }